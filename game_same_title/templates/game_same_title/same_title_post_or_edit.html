{% extends 'base.html' %}
{% load static %}

{% block content %}
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

{% if edit and novel.content %}
    <div class="novel-detail-section" style="overflow-x: hidden; max-width: 100%; box-sizing: border-box; width: 100%; padding-right: 10px;">
        {% include 'novels/novel_detail_section.html' with novel=novel is_published=is_published hide_edit_button=True %}
    </div>
    <style>
        /* ğŸ”¥ ã‚¹ãƒãƒ›ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå³ç«¯ã§åˆ‡ã‚Œã‚‹å•é¡Œä¿®æ­£ï¼ˆ2025-11-28ï¼‰ */
        .novel-detail-section,
        .novel-detail-section .container,
        .novel-detail-section .novel-content,
        .novel-detail-section .novel-content p {
            max-width: 100% !important;
            overflow-x: hidden !important;
            word-wrap: break-word !important;
            overflow-wrap: break-word !important;
            box-sizing: border-box !important;
        }
        @media (max-width: 768px) {
            .novel-detail-section {
                padding-left: 5px !important;
                padding-right: 5px !important;
            }
            .novel-detail-section .container {
                padding-left: 5px !important;
                padding-right: 5px !important;
            }
            .novel-detail-section .novel-content p {
                font-size: 18px !important;
            }
        }
    </style>
    <hr style="margin-top: 0;">
    <p class="toggle-message" id="message-warning" style="display:none;">
        â†‘ã“ã‚“ãªæ„Ÿã˜ã®ä»•ä¸ŠãŒã‚Šã‚„ï¼ã€€æ°—ã«å…¥ã‚‰ã¸ã‚“ã®ãªã‚‰ä¸‹â†“ã®æ¬„ã§ç·¨é›†ã—ã¦ã‚„ãƒ¼
        <button class="toggle-message-button">éè¡¨ç¤º</button>
    </p>
{% endif %}

<style>
    .form-group label {
        margin-bottom: 15px !important;
    }

    /* ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
    html body textarea.content, 
    html body textarea.form-control.content {
        width: calc(100% - 13px) !important;
        height: 70vh !important;  /* ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã®70%ã§å›ºå®š */
        min-height: 500px !important;
        padding: 15px !important;
        margin: 3px !important;
        
        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¨­å®š */
        overflow-y: auto !important;
        overflow-x: hidden !important;
        resize: vertical !important;
        
        /* ãã®ä»–ã®è¨­å®š */
        line-height: 1.5 !important;
        font-size: 20px !important;
    }
</style>

<hr style="margin-top: 0;">

<!-- ã“ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ã€ç‰¹å®šã®ãƒ†ã‚­ã‚¹ãƒˆã«è›å…‰ãƒšãƒ³ã®é»„è‰²ã‚’å¡—ã‚‹ãŸã‚ã®ã‚‚ã‚“ã‚„ã§ï¼ãŠå…„ã•ã‚“ã€ã“ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã¿ã¦ãªã€‚ç›®ç«‹ã¤ã§ãƒ¼ï¼ -->
<!--  editã®å ´åˆã“ã®ä¸Šã«å°èª¬è©³ç´°ã‚’çªã£è¾¼ã‚€ -->
<div class="container mt-5" style="margin-top: 15px !important;">
    <form method="post" class="needs-validation" novalidate>
        {% csrf_token %}

        <!-- å°èª¬ã®IDã‚’ä¿æŒã™ã‚‹ãŸã‚ã®éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
        <input type="hidden" id="novelId" name="novelId" value="{{ novel.id }}">

        <!-- statusãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ˜ç¤ºçš„ã«è¿½åŠ  -->
        <input type="hidden" name="status" value="draft">

        <!-- åŒã‚¿ã‚¤ãƒˆãƒ«ã‚²ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ -->
        <div class="form-check" style="margin-bottom: 15px; margin-left: 20px;">
            {% if current_month_same_title_info %}
                <!-- ä¸€ç•ªæ§æ±ºå®šå¾Œï¼šæ–°è¦æŠ•ç¨¿ã¯ã€ŒåŒã‚¿ã‚¤ãƒˆãƒ«ã€ã€æ—¢å­˜æŠ•ç¨¿ã¯is_same_title_gameã®å€¤ã§è¡¨ç¤º -->
                <input class="form-check-input"
                       type="checkbox"
                       id="{{ form.is_same_title_game.id_for_label }}"
                       name="{{ form.is_same_title_game.name }}"
                       {% if not edit or novel.is_same_title_game %}checked{% endif %}
                       disabled
                       style="opacity: 0.7; cursor: not-allowed;">
                <label class="form-check-label" for="{{ form.is_same_title_game.id_for_label }}" style="opacity: 0.7;">
                    {% if edit and novel.is_same_title_game == False %}
                        åŒã‚¿ã‚¤ãƒˆãƒ«å´©ã‚Œ
                    {% else %}
                        åŒã‚¿ã‚¤ãƒˆãƒ«
                    {% endif %}
                </label>
                <!-- hiddenãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€disabledæ™‚ã§ã‚‚å€¤ã‚’é€ä¿¡ -->
                <input type="hidden" name="{{ form.is_same_title_game.name }}" value="{% if not edit or novel.is_same_title_game %}true{% else %}false{% endif %}">
            {% else %}
                <!-- ä¸€ç•ªæ§æ±ºå®šå‰ï¼šå¸¸ã«ã€ŒåŒã‚¿ã‚¤ãƒˆãƒ«ã€ã§ãƒã‚§ãƒƒã‚¯å›ºå®š -->
                <input class="form-check-input"
                       type="checkbox"
                       id="{{ form.is_same_title_game.id_for_label }}"
                       name="{{ form.is_same_title_game.name }}"
                       checked
                       disabled
                       style="opacity: 0.7; cursor: not-allowed;">
                <label class="form-check-label" for="{{ form.is_same_title_game.id_for_label }}" style="opacity: 0.7;">
                    åŒã‚¿ã‚¤ãƒˆãƒ«
                </label>
                <!-- hiddenãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€disabledæ™‚ã§ã‚‚å€¤ã‚’é€ä¿¡ -->
                <input type="hidden" name="{{ form.is_same_title_game.name }}" value="true">
            {% endif %}
        </div>


<!-- ã‚¿ã‚¤ãƒˆãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç›´å‰ã«ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¿½åŠ  -->


<!-- ã‚¿ã‚¤ãƒˆãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
<div class="form-group">
    {% if current_month_same_title_info and current_month_same_title_info.title %}
        <!-- ä¸€ç•ªæ§ãŒæ±ºã¾ã£ãŸå¾Œï¼šã‚¿ã‚¤ãƒˆãƒ«å›ºå®šè¡¨ç¤º -->
        {% if edit and novel.is_same_title_game == False %}
            <!-- åŒã‚¿ã‚¤ãƒˆãƒ«å´©ã‚Œï¼šå…ƒã€…ã®ã‚¿ã‚¤ãƒˆãƒ«ã§å›ºå®š -->
            <label style="margin-bottom: 15px;">ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆå›ºå®šãƒ»å¤‰æ›´ä¸å¯ï¼‰</label>
            <div style="padding: 10px; background-color: #f0f8ff; border: 2px solid #8ecae6; border-radius: 5px; font-size: 1.2rem; font-weight: bold;">
                {{ novel.title }}
            </div>
            <!-- hidden inputã§å€¤ã‚’é€ä¿¡ -->
            <input type="hidden" id="{{ form.title.id_for_label }}" name="{{ form.title.name }}" value="{{ novel.title }}">
        {% else %}
            <!-- åŒã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæ–°è¦æŠ•ç¨¿ or ç·¨é›†ï¼‰ï¼šä¸€ç•ªæ§ã®ã‚¿ã‚¤ãƒˆãƒ«ã§å›ºå®š -->
            <label style="margin-bottom: 15px;">ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä»Šæœˆã®åŒã‚¿ã‚¤ãƒˆãƒ«ï¼‰</label>
            <div style="padding: 10px; background-color: #f0f8ff; border: 2px solid #8ecae6; border-radius: 5px; font-size: 1.2rem; font-weight: bold;">
                {{ current_month_same_title_info.title }}
            </div>
            <!-- hidden inputã§å€¤ã‚’é€ä¿¡ -->
            <input type="hidden" id="{{ form.title.id_for_label }}" name="{{ form.title.name }}" value="{{ current_month_same_title_info.title }}">
        {% endif %}
    {% else %}
        <!-- ä¸€ç•ªæ§ãŒæ±ºã¾ã‚‹å‰ï¼šã‚¿ã‚¤ãƒˆãƒ«é¸æŠ -->
        <label for="{{ form.title.id_for_label }}" style="margin-bottom: 15px;">ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæœ€åˆã€è‡ªåˆ†ã®ææ¡ˆã¯é¸æŠè‚¢å‡ºã¦ãã¾ã›ã‚“ï¼‰</label>
        <select class="form-control" id="{{ form.title.id_for_label }}" name="{{ form.title.name }}">
            <!-- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¸¸ã«æœ€åˆã«è¡¨ç¤º -->
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <!-- å‰æœˆã®ææ¡ˆã•ã‚ŒãŸã‚¿ã‚¤ãƒˆãƒ«ã‚’é¸æŠè‚¢ã«è¿½åŠ ï¼ˆè‡ªåˆ†ã®ææ¡ˆã¯é™¤å¤–æ¸ˆã¿ï¼‰ -->
            {% for proposal in last_month_proposals %}
                <option value="{{ proposal.title }}" {% if form.title.value == proposal.title %}selected{% endif %}>{{ proposal.title }}</option>
            {% endfor %}
        </select>
    {% endif %}
</div>

<!-- ã‚¤ãƒ‹ã‚·ãƒ£ãƒ«é¸æŠãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
<div class="form-group">
    <label for="{{ form.initial.id_for_label }}" style="margin-bottom: 15px;">ã‚¿ã‚¤ãƒˆãƒ«ã®åˆæ–‡å­—</label>
    <select class="form-control" id="{{ form.initial.id_for_label }}" name="{{ form.initial.name }}">
        {% for choice_value, choice_label in form.initial.field.choices %}
            <option value="{{ choice_value }}" {% if form.initial.value == choice_value %}selected{% endif %}>{{ choice_label }}</option>
        {% endfor %}
    </select>
</div>

<!-- ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
<div class="form-group">
    <label for="{{ form.genre.id_for_label }}" style="margin-bottom: 15px;">ã‚¸ãƒ£ãƒ³ãƒ«</label>
    <select class="form-control" id="{{ form.genre.id_for_label }}" name="{{ form.genre.name }}">
        {% for choice_value, choice_label in form.genre.field.choices %}
            <option value="{{ choice_value }}" {% if form.genre.value == choice_value %}selected{% endif %}>{{ choice_label }}</option>
        {% endfor %}
    </select>
</div>

<!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
<div class="form-group">
    <label for="{{ form.status.id_for_label }}" style="margin-bottom: 15px;">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
    <input type="text" 
           class="form-control" 
           value="{% if novel and novel.status == 'published' %}å…¬é–‹{% elif novel and novel.status == 'draft' %}ä½œæˆä¸­{% else %}ä½œæˆä¸­{% endif %}" 
           readonly 
           disabled>
</div>

        <!-- å°èª¬ã®å†…å®¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
        <div class="form-group">
            <label for="{{ form.content.id_for_label }}" style="margin-bottom: 15px;">å°èª¬ã®å†…å®¹</label>
            <textarea class="form-control content" id="{{ form.content.id_for_label }}" name="{{ form.content.name }}"
                      placeholder="ã“ã“ã«å°èª¬ã®ä¸­èº«ã‚’ãŠæ›¸ãã©ã™ã€‚ã“ã“ã¯è‡ªå‹•ä¿å­˜ãŒãªã„ã®ã§ã€ã“ã¾ã‚ã«ä¿å­˜ã—ã¦ã‚„ï¼" maxlength="10000">{{ form.content.value|default_if_none:'' }}</textarea>
        </div>

        <style>
            /* form-groupã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’ç¢ºå®Ÿã«å‰Šé™¤ã—ã€å·¦å³ãƒãƒ¼ã‚¸ãƒ³ã®ã¿æ®‹ã™ */
            html body .container .form-group,
            html body .form-group,
            .form-group {
                padding: 0 !important;
                margin: 0 3px !important;
                border: none !important;
                background: none !important;
            }

            /* ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
            html body textarea.content, 
            html body textarea.form-control.content {
                width: calc(100% - 13px) !important;
                height: auto !important;
                min-height: 500px !important;
                padding: 0 !important;
                margin-left: 3px !important;
                margin-right: 10px !important;
                
                /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–¢é€£ */
                overflow: auto !important;
                -webkit-overflow-scrolling: unset !important;
                overscroll-behavior: none !important;
                resize: none !important;
            }
        </style>

        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const textarea = document.querySelector('.content');
            
            function adjustHeight() {
                // æœ€å°ã®é«˜ã•ã‚’è¨­å®š
                const minHeight = Math.max(500, window.innerHeight * 0.7);
                
                // æ—¢å­˜ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¿æŒã—ãªãŒã‚‰é«˜ã•ã ã‘èª¿æ•´
                textarea.style.cssText = `
                    height: ${Math.max(textarea.scrollHeight, minHeight)}px !important;
                    min-height: ${minHeight}px !important;
                    margin-left: 3px !important;
                    margin-right: 10px !important;
                    width: calc(100% - 13px) !important;
                `;
            }
            
            // å…¥åŠ›æ™‚ã«é«˜ã•ã‚’è‡ªå‹•èª¿æ•´
            textarea.addEventListener('input', adjustHeight);
            
            // åˆæœŸè¡¨ç¤ºæ™‚ã«ç¢ºå®Ÿã«é«˜ã•ã‚’èª¿æ•´
            setTimeout(adjustHeight, 0);
            setTimeout(adjustHeight, 100);
            
            // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ãƒªã‚µã‚¤ã‚ºæ™‚ã«ã‚‚é«˜ã•ã‚’å†èª¿æ•´
            window.addEventListener('resize', adjustHeight);
        });
        </script>

        <div id="autoSaveStatus" style="display: none;"></div>
        </div>
        <!-- ä¸‹æ›¸ãã¨ã—ã¦ä¿å­˜ãƒœã‚¿ãƒ³ -->
        <button type="submit" name="action" value="draft" class="btn btn-secondary" style="margin-top: 0% !important;display: inline-flex; align-items: center; padding: 8px 12px; border-radius: 20px; background-color: orchid; color: white; margin-right: 10px;margin-bottom: 20px; font-size: 24px !important; font-weight: bold;">
            <span style="margin-right: 8px; font-size: 20px; font-weight: bold;">ä¿å­˜</span>
            <img src="{% static 'images/save.svg' %}" alt="Icon" style="height: 24px;"> 
        </button>




{% if edit %}


<!-- ä¼‘æ¯ãƒœã‚¿ãƒ³ -->
<button type="submit" name="action" value="rest" class="btn btn-secondary" style="display: inline-flex; align-items: center; padding: 8px 12px; border-radius: 20px; background-color: darkgreen; color: white; margin-right: 10px; margin-bottom: 20px; font-size: 24px !important; font-weight: bold;margin-top: 0% !important;">
    <span style="margin-right: 8px; font-size: 20px; font-weight: bold;">ä¼‘æ¯</span>
    <img src="{% static 'images/tea.svg' %}" alt="Icon" style="height: 24px;"> 
</button>

    <!-- æŠ•ç¨¿ãƒœã‚¿ãƒ³ -->
    <button type="submit" name="action" value="publish" class="btn btn-primary" style="display: inline-flex; align-items: center; padding: 8px 12px; border-radius: 20px; background-color: #007bff; color: white; margin-right: 10px;margin-bottom: 20px; font-size: 24px !important; font-weight: bold;">
        <span style="margin-right: 8px; font-size: 20px; font-weight: bold;">æŠ•ç¨¿</span>
        <img src="{% static 'images/post.svg' %}" alt="Icon" style="height: 24px;">
    </button>
    
    <!-- å‰Šé™¤ãƒœã‚¿ãƒ³ -->
    <button type="submit" name="action" value="delete" class="btn btn-primary" style="display: inline-flex; align-items: center; padding: 8px 12px; border-radius: 20px; background-color: red !important; color: white; margin-right: 10px;margin-bottom: 20px; font-size: 24px !important; font-weight: bold;">
        <span style="margin-right: 8px; font-size: 20px; font-weight: bold;">å‰Šé™¤</span>
        <img src="{% static 'images/delete.svg' %}" alt="Icon" style="height: 24px;">
    </button>
{% endif %}
    </form>
</div>


<!-- ãƒ•ãƒƒã‚¿ãƒ¼å†…ã«æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’è¡¨ç¤º -->
<div id="footerWordCount" style="text-align: center; padding: 10px; color: #fff; background-color: #333;">

    0 / 10,000æ–‡å­—
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    const checkbox = document.getElementById('id_is_same_title_game');
    const select = document.getElementById('id_title');
    const hasCurrentMonthTitle = {% if current_month_same_title_info %}true{% else %}false{% endif %};
    const lastMonthProposals = {% if last_month_proposals_json %}{{ last_month_proposals_json|safe }}{% else %}[]{% endif %};
    const savedTitle = "{{ form.title.value|default_if_none:""|escapejs }}";

    console.log('å‰æœˆã®ææ¡ˆ:', lastMonthProposals);  // ãƒ‡ãƒãƒƒã‚°ç”¨
    console.log('ä¸€ç•ªæ§æƒ…å ±:', {% if current_month_same_title_info %}true{% else %}false{% endif %});  // ãƒ‡ãƒãƒƒã‚°ç”¨

    function updateSelectOptions() {
        if (!select) return;  // selectãŒå­˜åœ¨ã—ãªã„å ´åˆã¯å‡¦ç†ã‚’ä¸­æ­¢

        // ğŸ”¥ ä¸€ç•ªæ§æ±ºå®šå‰ã¯ã€çµ¶å¯¾ã«ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®ã¾ã¾ï¼
        if (!hasCurrentMonthTitle) {
            // ä¸€ç•ªæ§æ±ºå®šå‰ï¼šå¿…ãšãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®ã¾ã¾ã€å‰æœˆã®ææ¡ˆã‚’è¡¨ç¤º
            select.innerHTML = '<option value="">é¸æŠã—ã¦ãã ã•ã„</option>';
            lastMonthProposals.forEach(function(proposal) {
                const option = document.createElement('option');
                option.value = proposal.fields.title;
                option.textContent = proposal.fields.title;
                if(proposal.fields.title === savedTitle) {
                    option.selected = true;
                }
                select.appendChild(option);
            });
            return;  // ã“ã“ã§çµ‚äº†ï¼çµ¶å¯¾ã«inputã«å¤‰ãˆã¸ã‚“ï¼
        }

        // ä¸€ç•ªæ§æ±ºå®šå¾Œã®å‡¦ç†
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢ã—ã€æ–°ã—ã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
        select.innerHTML = '<option value="">é¸æŠã—ã¦ãã ã•ã„</option>';

        if (checkbox.checked && hasCurrentMonthTitle) {
            // ä¸€ç•ªæ§ãŒã‚ã‚‹å ´åˆ
            {% if current_month_same_title_info %}
            const option = document.createElement('option');
            option.value = "{{ current_month_same_title_info.title|escapejs }}";
            option.textContent = "{{ current_month_same_title_info.title }}";
            if (option.value === savedTitle) {
                option.selected = true;
            }
            select.appendChild(option);
            {% endif %}
        } else if (!checkbox.checked) {
            // åŒã‚¿ã‚¤ãƒˆãƒ«ã‚²ãƒ¼ãƒ ã«ãƒã‚§ãƒƒã‚¯ãŒå…¥ã£ã¦ãªã„å ´åˆã¯ã€è‡ªç”±å…¥åŠ›å¯èƒ½ã«
            select.outerHTML = `<input type="text" class="form-control" id="id_title" name="title" value="${savedTitle}">`;
        }
    }

    checkbox.addEventListener('change', updateSelectOptions);
    updateSelectOptions(); // åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚‚å®Ÿè¡Œ
});

    $(document).ready(function() {
        // æ–‡å­—ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®åˆæœŸè¨­å®šã¨æ›´æ–°å‡¦ç†
        function updateWordCount() {
            var contentLength = $('#{{ form.content.id_for_label }}').val().length;
            $('#footerWordCount').text(contentLength + ' / 10,000æ–‡å­—');
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«æ–‡å­—ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’åˆæœŸåŒ–
        updateWordCount();

        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å…¥åŠ›ã”ã¨ã«æ–‡å­—ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’æ›´æ–°
        $('#{{ form.content.id_for_label }}').on('input', function() {
            updateWordCount();
        });

    });

    </script>

{% endblock %}


